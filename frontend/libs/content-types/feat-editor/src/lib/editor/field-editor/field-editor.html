<form [formGroup]="form" (ngSubmit)="submit()" class="flex flex-col gap-6">
	@let nameId = 'name' | uniqueId;
	<div class="flex flex-col gap-2">
		<p-floatlabel variant="on">
			<input
				[pAutoFocus]="true"
				class="w-full"
				[formControl]="form.controls.name"
				pInputText
				[id]="nameId"
				autocomplete="off"
			/>
			<label [for]="nameId">Name</label>
		</p-floatlabel>
	</div>

	<!-- Label field -->
	@let labelId = 'name' | uniqueId;
	<div class="flex flex-col gap-2">
		<p-floatlabel variant="on">
			<input class="w-full" [formControl]="form.controls.label" pInputText [id]="labelId"/>
			<label [for]="labelId">Label</label>
		</p-floatlabel>
		<p class="text-xs text-gray-500">Human-readable label shown in the UI.</p>
	</div>

	@let typeId = 'type' | uniqueId;
	<div class="flex flex-col gap-2">
		<p-floatlabel variant="on">
			<p-select class="w-full" [formControl]="form.controls.type" [inputId]="typeId" [options]="fieldTypes"/>
			<label [for]="typeId">Type</label>
		</p-floatlabel>
		<p class="text-xs text-gray-500">Select how this field stores data.</p>
	</div>

	@let isRequiredId = 'isRequired' | uniqueId;
	<div class="flex items-center gap-2">
		<p-checkbox [formControl]="form.controls.isRequired" binary [inputId]="isRequiredId"/>
		<label [for]="isRequiredId">Required</label>
	</div>

	<div class="flex justify-between gap-2 pt-2">
		@let id = fieldId();
		@if (id) {
			<p-button
				outlined
				severity="danger"
				styleClass="min-w-28"
				label="Delete"
				type="button"
				(onClick)="delete(id)"
			/>
		}
		<p-button label="Save" styleClass="min-w-28" [disabled]="form.invalid" type="submit"/>
	</div>
</form>
